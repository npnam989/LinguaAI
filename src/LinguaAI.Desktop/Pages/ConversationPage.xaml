<Page x:Class="LinguaAI.Desktop.Pages.ConversationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Luyá»‡n Giao Tiáº¿p"
      Style="{DynamicResource PageBase}">
    
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel HorizontalAlignment="Center" Margin="0,0,0,20">
            <TextBlock Text="ðŸ’¬ Luyá»‡n Giao Tiáº¿p" Style="{DynamicResource HeaderTitle}" HorizontalAlignment="Center"/>
            <TextBlock Text="TrÃ² chuyá»‡n vá»›i AI trong cÃ¡c tÃ¬nh huá»‘ng thá»±c táº¿" 
                       Style="{DynamicResource SubtitleText}" HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Settings Panel -->
        <Border Grid.Row="1" Style="{DynamicResource GlassPanel}" Margin="0,0,0,20">
            <WrapPanel HorizontalAlignment="Left">
                <!-- Language Selector -->
                <StackPanel Margin="10,5">
                    <TextBlock Text="NgÃ´n ngá»¯" Foreground="{DynamicResource SecondaryText}" FontSize="12" Margin="0,0,0,5"/>
                    <ComboBox x:Name="LanguageComboBox" Width="150" SelectedIndex="0">
                        <ComboBoxItem Content="ðŸ‡°ðŸ‡· Tiáº¿ng HÃ n" Tag="ko"/>
                        <ComboBoxItem Content="ðŸ‡¨ðŸ‡³ Tiáº¿ng Trung" Tag="zh"/>
                        <ComboBoxItem Content="ðŸ‡ºðŸ‡¸ Tiáº¿ng Anh" Tag="en"/>
                    </ComboBox>
                </StackPanel>
                
                <!-- Scenario Selector -->
                <StackPanel Margin="10,5">
                    <TextBlock Text="Ká»‹ch báº£n" Foreground="{DynamicResource SecondaryText}" FontSize="12" Margin="0,0,0,5"/>
                    <ComboBox x:Name="ScenarioComboBox" Width="160" SelectedIndex="0">
                        <ComboBoxItem Content="â˜• QuÃ¡n cÃ  phÃª" Tag="coffee"/>
                        <ComboBoxItem Content="ðŸ½ï¸ NhÃ  hÃ ng" Tag="restaurant"/>
                        <ComboBoxItem Content="ðŸ›ï¸ Mua sáº¯m" Tag="shopping"/>
                        <ComboBoxItem Content="âœˆï¸ Du lá»‹ch" Tag="travel"/>
                        <ComboBoxItem Content="ðŸ’¼ CÃ´ng viá»‡c" Tag="work"/>
                        <ComboBoxItem Content="ðŸ  Äá»i thÆ°á»ng" Tag="daily"/>
                        <ComboBoxItem Content="ðŸŽ¯ Phá»ng váº¥n" Tag="interview"/>
                    </ComboBox>
                </StackPanel>
                
                <Button Content="ðŸ”„ Cuá»™c há»™i thoáº¡i má»›i" 
                        Style="{DynamicResource SecondaryButton}" Margin="10,5"
                        VerticalAlignment="Bottom"
                        Click="NewConversation_Click"/>
            </WrapPanel>
        </Border>

        <!-- Chat Area -->
        <Border Grid.Row="2" Style="{DynamicResource GlassPanel}" Padding="15">
            <ScrollViewer x:Name="ChatScrollViewer" VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="ChatPanel">
                    <!-- Welcome Message -->
                    <Border Style="{DynamicResource ChatMessageAI}">
                        <TextBlock Text="Xin chÃ o! HÃ£y chá»n ngÃ´n ngá»¯ vÃ  ká»‹ch báº£n, sau Ä‘Ã³ báº¯t Ä‘áº§u trÃ² chuyá»‡n nhÃ©! ðŸ‘‹" 
                                   Foreground="{DynamicResource PrimaryText}" TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Input Area -->
        <Border Grid.Row="3" Style="{DynamicResource GlassPanel}" Margin="0,15,0,0" Padding="10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="MessageInput" 
                         FontSize="15" Padding="12,10"
                         Background="{DynamicResource InputBackground}"
                         Foreground="{DynamicResource PrimaryText}"
                         BorderBrush="{DynamicResource Border}"
                         BorderThickness="1"
                         KeyDown="MessageInput_KeyDown">
                    <TextBox.Template>
                        <ControlTemplate TargetType="TextBox">
                            <Border Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}" 
                                    CornerRadius="8">
                                <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                            </Border>
                        </ControlTemplate>
                    </TextBox.Template>
                </TextBox>
                
                <Button Grid.Column="1" Content="Gá»­i" 
                        Style="{DynamicResource PrimaryButton}" Margin="10,0,0,0"
                        Click="SendButton_Click"/>
            </Grid>
        </Border>
    </Grid>
</Page>
