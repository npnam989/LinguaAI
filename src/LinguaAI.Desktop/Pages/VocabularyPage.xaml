<Page x:Class="LinguaAI.Desktop.Pages.VocabularyPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Há»c Tá»« Vá»±ng"
      Style="{DynamicResource PageBase}">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="30">
            <!-- Header -->
            <StackPanel HorizontalAlignment="Center" Margin="0,0,0,30">
                <TextBlock Text="ðŸ“š Há»c Tá»« Vá»±ng" Style="{DynamicResource HeaderTitle}" HorizontalAlignment="Center"/>
                <TextBlock Text="Há»c tá»« má»›i theo chá»§ Ä‘á» hoáº·c táº£i danh sÃ¡ch tá»« file" 
                           Style="{DynamicResource SubtitleText}" HorizontalAlignment="Center"/>
            </StackPanel>

            <!-- Settings Panel -->
            <Border Style="{DynamicResource GlassPanel}" Margin="0,0,0,30">
                <StackPanel>
                    <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,15">
                        <!-- Language Selector -->
                        <StackPanel Margin="10,5">
                            <TextBlock Text="NgÃ´n ngá»¯" Foreground="{DynamicResource SecondaryText}" FontSize="12" Margin="0,0,0,5"/>
                            <ComboBox x:Name="LanguageComboBox" Width="150" SelectedIndex="0">
                                <ComboBoxItem Content="ðŸ‡°ðŸ‡· Tiáº¿ng HÃ n" Tag="ko"/>
                                <ComboBoxItem Content="ðŸ‡¨ðŸ‡³ Tiáº¿ng Trung" Tag="zh"/>
                                <ComboBoxItem Content="ðŸ‡ºðŸ‡¸ Tiáº¿ng Anh" Tag="en"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <!-- Theme Selector -->
                        <StackPanel Margin="10,5">
                            <TextBlock Text="Chá»§ Ä‘á»" Foreground="{DynamicResource SecondaryText}" FontSize="12" Margin="0,0,0,5"/>
                            <ComboBox x:Name="ThemeComboBox" Width="180" SelectedIndex="0">
                                <ComboBoxItem Content="ðŸ‘‹ ChÃ o há»i" Tag="greetings"/>
                                <ComboBoxItem Content="ðŸ”¢ Sá»‘ Ä‘áº¿m" Tag="numbers"/>
                                <ComboBoxItem Content="ðŸ• Äá»“ Äƒn" Tag="food"/>
                                <ComboBoxItem Content="ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦ Gia Ä‘Ã¬nh" Tag="family"/>
                                <ComboBoxItem Content="ðŸŽ¨ MÃ u sáº¯c" Tag="colors"/>
                                <ComboBoxItem Content="ðŸ¾ Äá»™ng váº­t" Tag="animals"/>
                                <ComboBoxItem Content="ðŸŒ¤ï¸ Thá»i tiáº¿t" Tag="weather"/>
                                <ComboBoxItem Content="ðŸ›’ Mua sáº¯m" Tag="shopping"/>
                                <ComboBoxItem Content="ðŸ§³ Du lá»‹ch" Tag="travel"/>
                                <ComboBoxItem Content="ðŸ’¼ CÃ´ng viá»‡c" Tag="work"/>
                            </ComboBox>
                        </StackPanel>
                        
                        <!-- Word Count -->
                        <StackPanel Margin="10,5">
                            <TextBlock Text="Sá»‘ tá»«" Foreground="{DynamicResource SecondaryText}" FontSize="12" Margin="0,0,0,5"/>
                            <ComboBox x:Name="CountComboBox" Width="80" SelectedIndex="1">
                                <ComboBoxItem Content="5" Tag="5"/>
                                <ComboBoxItem Content="10" Tag="10"/>
                                <ComboBoxItem Content="15" Tag="15"/>
                                <ComboBoxItem Content="20" Tag="20"/>
                            </ComboBox>
                        </StackPanel>
                    </WrapPanel>
                    
                    <!-- Generate Button -->
                    <Button x:Name="GenerateButton" Content="ðŸ“š Táº£i tá»« AI" 
                            Style="{DynamicResource PrimaryButton}"
                            HorizontalAlignment="Center" Margin="0,10,0,0"
                            Click="GenerateButton_Click"/>
                </StackPanel>
            </Border>

            <!-- Loading -->
            <Border x:Name="LoadingPanel" Visibility="Collapsed" Margin="0,30">
                <StackPanel HorizontalAlignment="Center">
                    <ProgressBar IsIndeterminate="True" Width="200" Height="4" Foreground="{DynamicResource Primary}"/>
                    <TextBlock Text="Äang xá»­ lÃ½..." Foreground="{DynamicResource MutedText}" 
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </Border>

            <!-- Mode Selection (visible after loading) -->
            <WrapPanel x:Name="ModePanel" Visibility="Collapsed" HorizontalAlignment="Center" Margin="0,0,0,30">
                <Button x:Name="FlashcardModeBtn" Content="ðŸƒ Flashcard" 
                        Style="{DynamicResource PrimaryButton}" Margin="5"
                        Click="FlashcardMode_Click"/>
                <Button x:Name="ListModeBtn" Content="ðŸ“‹ Danh sÃ¡ch" 
                        Style="{DynamicResource SecondaryButton}" Margin="5"
                        Click="ListMode_Click"/>
            </WrapPanel>

            <!-- Flashcard Area -->
            <Border x:Name="FlashcardArea" Visibility="Collapsed" Margin="0,20">
                <StackPanel HorizontalAlignment="Center">
                    <!-- Progress -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,20">
                        <TextBlock x:Name="CurrentIndexText" Text="1" FontSize="24" FontWeight="Bold" 
                                   Foreground="{DynamicResource PrimaryLight}"/>
                        <TextBlock Text=" / " FontSize="24" Foreground="{DynamicResource MutedText}"/>
                        <TextBlock x:Name="TotalCountText" Text="10" FontSize="24" Foreground="{DynamicResource MutedText}"/>
                    </StackPanel>

                    <!-- Flashcard -->
                    <Border x:Name="Flashcard" Style="{DynamicResource FlashcardFront}" 
                            Width="400" Height="280" Cursor="Hand"
                            MouseLeftButtonDown="Flashcard_Click">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock x:Name="CardWord" Text="" FontSize="32" FontWeight="Bold" 
                                       Foreground="White" HorizontalAlignment="Center" TextWrapping="Wrap"/>
                            <TextBlock x:Name="CardPronunciation" Text="" FontSize="16" 
                                       Foreground="#ffffffcc" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                            <TextBlock x:Name="CardMeaning" Text="" FontSize="18" Visibility="Collapsed"
                                       Foreground="{DynamicResource PrimaryLight}" HorizontalAlignment="Center" 
                                       TextWrapping="Wrap" Margin="0,15,0,0"/>
                            <TextBlock x:Name="CardExample" Text="" FontSize="14" Visibility="Collapsed"
                                       Foreground="{DynamicResource SecondaryText}" HorizontalAlignment="Center" 
                                       TextWrapping="Wrap" Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>
                    <TextBlock Text="Nháº¥n vÃ o tháº» Ä‘á»ƒ láº­t" Foreground="{DynamicResource MutedText}" 
                               HorizontalAlignment="Center" Margin="0,15,0,0"/>

                    <!-- Navigation -->
                    <WrapPanel HorizontalAlignment="Center" Margin="0,25,0,0">
                        <Button Content="â¬…ï¸ TrÆ°á»›c" Style="{DynamicResource SecondaryButton}" 
                                Margin="5" Click="PrevCard_Click"/>
                        <Button Content="ðŸ”€ Trá»™n" Style="{DynamicResource SecondaryButton}" 
                                Margin="5" Click="ShuffleCards_Click"/>
                        <Button Content="Tiáº¿p âž¡ï¸" Style="{DynamicResource PrimaryButton}" 
                                Margin="5" Click="NextCard_Click"/>
                    </WrapPanel>
                </StackPanel>
            </Border>

            <!-- Word List Area -->
            <Border x:Name="WordListArea" Visibility="Collapsed" Style="{DynamicResource CardStyle}" Margin="0,20">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <TextBlock Text="ðŸ“‹ Danh sÃ¡ch tá»« vá»±ng (" FontSize="18" FontWeight="Bold" 
                                   Foreground="{DynamicResource PrimaryText}"/>
                        <TextBlock x:Name="WordCountText" Text="0" FontSize="18" FontWeight="Bold" 
                                   Foreground="{DynamicResource Primary}"/>
                        <TextBlock Text=" tá»«)" FontSize="18" FontWeight="Bold" 
                                   Foreground="{DynamicResource PrimaryText}"/>
                    </StackPanel>
                    
                    <ItemsControl x:Name="VocabularyList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{DynamicResource SurfaceBackground}" 
                                        BorderBrush="{DynamicResource Border}" BorderThickness="1" 
                                        CornerRadius="8" Padding="15" Margin="0,5">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Word}" FontWeight="Bold" FontSize="18" 
                                                       Foreground="{DynamicResource PrimaryText}"/>
                                            <TextBlock Text="{Binding Pronunciation}" FontStyle="Italic" 
                                                       Foreground="{DynamicResource MutedText}" Margin="15,0,0,0" 
                                                       VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <TextBlock Text="{Binding Meaning}" Foreground="{DynamicResource PrimaryLight}" 
                                                   FontSize="15" Margin="0,8,0,0"/>
                                        <TextBlock Text="{Binding Example}" Foreground="{DynamicResource SecondaryText}" 
                                                   FontSize="13" TextWrapping="Wrap" Margin="0,5,0,0"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Empty State -->
            <Border x:Name="EmptyState" Style="{DynamicResource CardStyle}" Padding="60" HorizontalAlignment="Center">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="ðŸ“š" FontSize="48" HorizontalAlignment="Center"/>
                    <TextBlock Text="Chá»n chá»§ Ä‘á» vÃ  nháº¥n &quot;Táº£i tá»« AI&quot; Ä‘á»ƒ báº¯t Ä‘áº§u há»c" 
                               Foreground="{DynamicResource MutedText}" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
